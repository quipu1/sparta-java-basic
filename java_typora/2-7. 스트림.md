# 2-7. ìŠ¤íŠ¸ë¦¼



## ìŠ¤íŠ¸ë¦¼(stream)ì´ë€?

- **ìŠ¤íŠ¸ë¦¼**ì€ ê³§ 'ë°ì´í„°ì˜ íë¦„'ì…ë‹ˆë‹¤.
- ì»¬ë ‰ì…˜ì˜ ì €ì¥ ìš”ì†Œë¥¼ í•˜ë‚˜ì”© ì°¸ì¡°í•´ì„œ ëŒë‹¤ì‹ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ë°˜ë³µìì…ë‹ˆë‹¤.
- ìŠ¤íŠ¸ë¦¼ì„ í™œìš©í•´ì„œ í•„í„°ë§,ë°ì´í„° ë³€ê²½, ë‹¤ë¥¸ íƒ€ì…ì´ë‚˜ ìë£Œêµ¬ì¡°ë¡œ ë³€í™˜ ë“±ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.



### ìŠ¤íŠ¸ë¦¼ì˜ íŠ¹ì§•

- ìŠ¤íŠ¸ë¦¼ì€ ë°ì´í„° ì†ŒìŠ¤ë¥¼ ë³€ê²½í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- ìŠ¤íŠ¸ë¦¼ì€ ì‘ì—…ì„ ë‚´ë¶€ì ìœ¼ë¡œ ë°˜ë³µ ì²˜ë¦¬í•©ë‹ˆë‹¤.
- ìŠ¤íŠ¸ë¦¼ì€ ì»¬ë ‰ì…˜ì˜ ìš”ì†Œë¥¼ ëª¨ë‘ ì½ê³  ë‚˜ë©´ ë‹«í˜€ì„œ ì¬ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ í•„ìš”í•  ê²½ìš° ì¬ìƒì„±ì„ í•´ì•¼í•©ë‹ˆë‹¤.



### ìŠ¤íŠ¸ë¦¼ì˜ êµ¬ì¡°

1. **ìŠ¤íŠ¸ë¦¼ ìƒì„±**

- ìŠ¤íŠ¸ë¦¼ì„ ì´ìš©í•˜ê¸° ìœ„í•´ ë¨¼ì € ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±í•´ì•¼í•©ë‹ˆë‹¤.
- `Stream<T> Collection.stream()` ì„ ì´ìš©í•˜ì—¬ í•´ë‹¹í•˜ëŠ” ì»¬ë ‰ì…˜ì„ ê¸°ë°˜ìœ¼ë¡œí•˜ëŠ” ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±í•  ìˆ˜ìˆìŠµë‹ˆë‹¤. (*ì»¬ë ‰ì…˜ì— ëŒ€í•´ì„œëŠ” ì´ë¯¸ ë°°ìš°ì…¨ì£ !?)*

1. **ì¤‘ê°„ ì—°ì‚°**

- ì¤‘ê°„ ë‹¨ê³„ë¡œì¨ ë°ì´í„°ì˜ í˜•ë³€í™˜ í˜¹ì€ í•„í„°ë§, ì •ë ¬ ë“± ìŠ¤íŠ¸ë¦¼ì— ëŒ€í•œ ê°€ê³µì„ í•´ì¤ë‹ˆë‹¤.
- map(ë³€í™˜) / sorted(ì •ë ¬) / skip(ìŠ¤íŠ¸ë¦¼ ìë¥´ê¸°) / limit(ìŠ¤íŠ¸ë¦¼ ìë¥´ê¸°) ë“±ì´ ìˆìŠµë‹ˆë‹¤.

1. **ìµœì¢… ì—°ì‚°**

- ìŠ¤íŠ¸ë¦¼ì˜ ìš”ì†Œë¥¼ ì†Œëª¨í•´ì„œ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤. ìµœì¢… ì—°ì‚° ì´í›„ì—ëŠ” ìŠ¤íŠ¸ë¦¼ì´ ë‹«íˆê²Œ ë˜ê³  ë” ì´ìƒ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
- ìµœì¢… ì—°ì‚°ì˜ ê²°ê³¼ê°’ì€ ë‹¨ì¼ ê°’ì¼ ìˆ˜ë„ ìˆìœ¼ë©° ë°°ì—´ í˜¹ì€ ì»¬ë ‰ì…˜ì¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
- collect()ë¥¼ ì´ìš©í•´ì„œ ë‹¤ë¥¸ ì½œë ‰ì…˜ìœ¼ë¡œ ë°”ê¾¸ëŠ” ê²ƒ, reduceë¥¼ ì´ìš©í•´ì„œ incremental calculationí•˜ëŠ” ê²ƒë„ ê°€ì¥ ë§ì´ ì“°ì´ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤.

<aside> ğŸ’¡ **ìŠ¤íŠ¸ë¦¼ì˜ ì—°ì‚°** ìŠ¤íŠ¸ë¦¼ì˜ ì—°ì‚°ì€ ë‹¤ì–‘í•˜ê²Œ ì¡´ì¬í•©ë‹ˆë‹¤. ê³µë¶€ë¥¼ í•˜ë©´ì„œ í•„ìš”í•  ë•Œë§ˆë‹¤ ì ì ˆí•œ ì—°ì‚°ì— ëŒ€í•´ì„œ ìµí˜€ë³´ì„¸ìš”!</aside>



### ìŠ¤íŠ¸ë¦¼ì„ í™œìš©í•œ ì˜ˆì œ

ìŠ¤íŠ¸ë¦¼ ì˜ˆì œ 1: ê¸°ë³¸ êµ¬ì¡°

```java
import java.util.ArrayList;
import java.util.List;
import java.util.Set;
import java.util.stream.Collectors;

public class Main {
    public static void main(String[] args) {
        List<String> list = new ArrayList<>();
        list.add("ì„œìš¸");
        list.add("ë¶€ì‚°");
        list.add("ì†ì´ˆ");
        list.add("ì„œìš¸");

        System.out.println(list);
        List<String> result = list.stream() // ìŠ¤íŠ¸ë¦¼ ìƒì„±
                                  .limit(2) //ì¤‘ê°„ ì—°ì‚°
                                  .collect(Collectors.toList()); // ìµœì¢… ì—°ì‚°
        System.out.println(result);

        System.out.println("list -> transformation -> set");
        Set<String> set = list.stream()
            					// .filter(it -> "ì„œìš¸".equals(it))
                              .filter("ì„œìš¸"::equals)
                              .collect(Collectors.toSet());
        set.forEach(System.out::println);
    }
}
```



ìŠ¤íŠ¸ë¦¼ ì˜ˆì œ 2: Arrayë¥¼ Streamìœ¼ë¡œ ë³€í™˜

```java
public class Main {
    public static void main(String[] args) {
        String[] arr = {"ì—‘ì…€ë³´ë‹¤ ì‰¬ìš´ SQL", "ì›¹ê°œë°œ ì¢…í•©ë°˜",
                "ì•Œê³ ë³´ë©´ ì•Œê¸°ì‰¬ìš´ ì•Œê³ ë¦¬ì¦˜", "ì›¹ê°œë°œì˜ ë´„,Spring"};
        Stream<String> stringStream = Arrays.stream(arr);
        stringStream.forEach(className -> System.out.println("ìˆ˜ì—…ëª… : " + className));
        System.out.println();
    }
}
```



ìŠ¤íŠ¸ë¦¼ ì˜ˆì œ 3: mapì—°ì‚° í™œìš©

```java
class Sale {
    String fruitName;
    int price;
    float discount;

    public Sale(String fruitName, int price, float discount) {
        this.fruitName = fruitName;
        this.price = price;
        this.discount = discount;
    }
}

public class Main {
    public static void main(String[] args) {
        
    }
}
```

ì˜ˆì œ 3ì„ ìœ„í•´ build.gradleì˜ dependencies ì½”ë“œ ë¸”ëŸ­ì— ë‹¤ìŒê³¼ ê°™ì´ libraryë¥¼ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.

```groovy
dependencies {
	implementation 'org.apache.commons:commons-lang3:3.0'
  // other codes..
}
import java.util.Arrays;
import java.util.List;
import java.util.stream.Stream;

import org.apache.commons.lang3.tuple.Pair;

class Sale {
    String fruitName;
    int price;
    float discount;

    public Sale(String fruitName, int price, float discount) {
        this.fruitName = fruitName;
        this.price = price;
        this.discount = discount;
    }
}

public class Main {
    public static void main(String[] args) {
        List<Sale> saleList = Arrays.asList(
                new Sale("Apple", 5000, 0.05f),
                new Sale("Grape", 3000, 0.1f),
                new Sale("Orange", 4000, 0.2f),
                new Sale("Tangerine", 2000, 0)
        );

        Stream<Sale> saleStream = saleList.stream();
        saleStream.map(sale -> Pair.of(sale.fruitName, sale.price * (1 - sale.discount)))
                  .forEach(pair -> System.out.println(pair.getLeft() + " ì‹¤ êµ¬ë§¤ê°€:  " + pair.getRight() + "ì› "));
    }
}
```



ìŠ¤íŠ¸ë¦¼ ì˜ˆì œ 4: `reduce`ë¥¼ ì´ìš©í•œ ê³„ì‚°

```java
public class Main {
    public static void main(String[] args) {
        List<Integer> numArr = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);
        Integer result = numArr.stream().reduce(0, Integer::sum);
        //reduceì™€ sumì„ í™œìš©í•˜ì—¬ 1ë¶€í„° 10ê¹Œì§€ ë”í•˜ê²Œ ë©ë‹ˆë‹¤.
        System.out.println(result);
    }
}
```